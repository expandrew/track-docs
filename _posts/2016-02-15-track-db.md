---
layout: page
title: "Database"
category: doc
date: 2016-02-15 12:04:58
order: 3
---

**track-db** is the database layer for the **expandrew/track** project.

## Local Environment (Pre-Docker)

### Install Postgres / Create Database

Set up Postgres using [this article](https://www.codefellows.org/blog/three-battle-tested-ways-to-install-postgresql):

~~~bash
$ brew install postgres       # and follow the caveats after it finishes
$ createdb track-db
~~~

### Configuring with Django

**track-api** is [configured](https://devcenter.heroku.com/articles/django-app-configuration#database-configuration) to get the database URL using [`dj-database-url`](https://github.com/kennethreitz/dj-database-url).

To point **track-api** to the local database, set the `DATABASE_URL` environment variable:

~~~bash
$ export DATABASE_URL=postgres://amw@localhost/track-db
~~~

### Heroku Postgres

The production database is attached to a Heroku app called **expandrew-track-db**.

To connect locally: 

~~~bash
$ heroku pg:psql --app expandrew-track-db DATABASE
~~~

To point the local development environment to the production Heroku **expandrew-track-db** database, go to the Heroku Postgres configuration page for [expandrew-track-db :: database](https://postgres.heroku.com/databases/expandrew-track-db-database), reveal/copy the URL, and assign it to `DATABASE_URL` locally.

#### Reference Articles

- [JSON in Postgres](http://blog.codeship.com/unleash-the-power-of-storing-json-in-postgres/)
- [Installing Postgres with Brew](https://www.codefellows.org/blog/three-battle-tested-ways-to-install-postgresql)
- [Configuring Django Apps for Heroku - Database Configuration](https://devcenter.heroku.com/articles/django-app-configuration#database-configuration)

